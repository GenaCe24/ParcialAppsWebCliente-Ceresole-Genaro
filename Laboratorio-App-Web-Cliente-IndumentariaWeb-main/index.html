<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>ISTEAoutlet</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .card-img-top {
      height: 350px;
      object-fit: cover;
    }

    .navbar-custom {
    background-color: #ffe066; 
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .navbar-custom .navbar-brand,
    .navbar-custom .nav-link,
    .navbar-custom #user-info {
      color: #333;
      font-weight: bold;
    }

    .btn-outline-primary {
      border-color: #333;
      color: #333;
    }

    .btn-outline-primary:hover {
      background-color: #333;
      color: #fff;
    }

    .btn-primary {
      background-color: #333;
      border-color: #333;
    }

    #scrollToTopBtn {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 1000;
    display: none;
    border-radius: 50%;
    padding: 10px 15px;
    font-size: 20px;
    }

    body {
    background-color: #eeedb9;
    }


    </style>
  </head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-custom px-4">
  <a class="navbar-brand" href="#">ISTEAoutlet</a>
  <div class="collapse navbar-collapse show">
    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
      <li class="nav-item"><a class="nav-link active" href="#">üè†‚Äã</a></li>
    </ul>
    <input type="text" id="search-input" class="form-control me-3" placeholder="Buscar productos..." oninput="filterProducts()">

    <select id="category-filter" class="form-select w-auto me-3" onchange="filterByCategory()">
      <option value="">Todas las categor√≠as</option>
      <option value="hombre">Hombre</option>
      <option value="mujer">Mujer</option>
      <option value="ni√±o">Ni√±os</option>
    </select>

    <span id="user-info" class="me-3"></span>
    <button class="btn btn-outline-primary me-2" id="loginBtn" data-bs-toggle="modal" data-bs-target="#loginModal">Iniciar Sesi√≥n</button>
    <button class="btn btn-outline-danger me-2 d-none" id="logoutBtn" onclick="logout()">Cerrar Sesi√≥n</button>
    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#cartModal">Carrito <span id="cart-count" class="badge bg-secondary">0</span></button>
  </div>
</nav>

<!-- Productos -->
<div class="container mt-4">
  <div class="row" id="product-list"></div>
</div>

<!-- Modal: Login -->
<div class="modal fade" id="loginModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <form onsubmit="login(event)">
        <div class="modal-header">
          <h5 class="modal-title">Iniciar Sesi√≥n</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <input type="text" id="username" class="form-control" placeholder="Nombre de usuario" required>
          <input type="password" id="password" class="form-control mt-2" placeholder="Contrase√±a" required>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Ingresar</button>
          <button type="button" class="btn btn-link" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#registerModal">¬øNo tienes cuenta? Reg√≠strate</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Modal: Register -->
<div class="modal fade" id="registerModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <form onsubmit="register(event)">
        <div class="modal-header">
          <h5 class="modal-title">Reg√≠strate</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <input type="text" id="new-username" class="form-control" placeholder="Nombre de usuario" required>
          <input type="password" id="new-password" class="form-control mt-2" placeholder="Contrase√±a" required>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Registrarse</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Modal: Carrito -->
<div class="modal fade" id="cartModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Tu Carrito</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <ul id="cart-items" class="list-group"></ul>
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger" onclick="vaciarCarrito()">Vaciar carrito</button>
        <button class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        <button class="btn btn-success" onclick="finalizarCompra()">Finalizar compra</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal: Detalles del Producto -->
<div class="modal fade" id="productModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="productModalTitle"></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <img id="productModalImage" src="" class="img-fluid mb-3" alt="">
        <p id="productModalDescription"></p>
        <label for="productSize" class="form-label">Talle:</label>
        <select id="productSize" class="form-select">
          <option value="">Seleccionar talle</option>
          <option value="S">S</option>
          <option value="M">M</option>
          <option value="L">L</option>
          <option value="XL">XL</option>
        </select>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        <button class="btn btn-success" onclick="confirmAddToCart()">Agregar al carrito</button>
      </div>
    </div>
  </div>
</div>

<!-- Bot√≥n para volver al principio -->
<button id="scrollToTopBtn" class="btn btn-primary" onclick="scrollToTop()">
  ‚Üë 
</button>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
const products = [
  // Hombre
  { name: "Camisa de vestir hombre", image: "img/Camisa de vestir hombre.jpg", description: "Camisa formal ideal para eventos o trabajo.", category: "hombre" },
  { name: "Jean azul hombre", image: "img/jeanazulhombre.jpg", description: "Jean cl√°sico azul para uso diario.", category: "hombre" },
  { name: "Campera de cuero hombre", image: "img/camperacuerohombre.jpg", description: "Campera de cuero sint√©tico con estilo urbano.", category: "hombre" },
  { name: "Buzo canguro hombre", image: "img/buzocangurohombre.jpg", description: "C√≥modo buzo con capucha para el fr√≠o.", category: "hombre" },
  { name: "Remera b√°sica negra hombre", image: "img/remerabasicanegra.jpg", description: "Remera cl√°sica negra de algod√≥n.", category: "hombre" },
  { name: "Pantal√≥n jogger hombre", image: "img/pantalonjoggerhombre.jpg", description: "Jogger c√≥modo con pu√±os ajustados para uso diario.", category: "hombre" },
  { name: "Zapatillas urbanas hombre", image: "img/zapatillasurbanashombre.jpg", description: "Zapatillas modernas ideales para un look casual.", category: "hombre" },
  { name: "Short deportivo hombre", image: "img/Shortdeportivohombre.jpg", description: "Short liviano y fresco para entrenamientos.", category: "hombre" },
  { name: "Sweater de lana hombre", image: "img/Sweaterdelanahombre.jpg", description: "Sweater abrigado ideal para d√≠as fr√≠os.", category: "hombre" },
  { name: "Campera inflable hombre", image: "img/Camperainflablehombre.jpg", description: "Campera liviana y t√©rmica para el invierno.", category: "hombre" },


  // Mujer
  { name: "Blusa manga larga mujer", image: "img/Blusamangalargamujer.jpg", description: "Blusa fresca y elegante para cualquier ocasi√≥n.", category: "mujer" },
  { name: "Jean tiro alto mujer", image: "img/Jeantiroaltomujer.jpg", description: "Jean con calce ajustado y moderno.", category: "mujer" },
  { name: "Vestido floral mujer", image: "img/Vestidofloralmujer.jpg", description: "Vestido liviano con estampado floral ideal para primavera.", category: "mujer" },
  { name: "Campera de jean mujer", image: "img/Camperadejeanmujer.jpg", description: "Campera cl√°sica de jean para looks casuales.", category: "mujer" },
  { name: "Remera escote en V mujer", image: "img/RemeraescoteenVmujer.jpg", description: "Remera b√°sica con escote en V.", category: "mujer" },
  { name: "Pollera corta mujer", image: "img/Polleracortamujer.jpg", description: "Pollera vers√°til ideal para verano.", category: "mujer" },
  { name: "Legging deportiva mujer", image: "img/Leggingdeportivamujer.jpg", description: "Legging c√≥moda para entrenar o estar en casa.", category: "mujer" },
  { name: "Zapatillas blancas mujer", image: "img/Zapatillasblancasmujer.jpg", description: "Zapatillas blancas combinables con todo.", category: "mujer" },
  { name: "Sweater oversize mujer", image: "img/Sweateroversizemujer.jpg", description: "Sweater suelto y abrigado para invierno.", category: "mujer" },
  { name: "Campera parka mujer", image: "img/Camperaparkamujer.jpg", description: "Campera larga con capucha, ideal para el fr√≠o.", category: "mujer" },

  // Ni√±os
  { name: "Conjunto deportivo ni√±o", image: "img/Conjuntodeportivoni√±o.jpg", description: "Conjunto c√≥modo para actividades deportivas.", category: "ni√±o" },
  { name: "Jean elastizado ni√±o", image: "img/Jeanelastizadoni√±o.jpg", description: "Jean con elasticidad para mayor confort.", category: "ni√±o" },
  { name: "Remera estampada ni√±o", image: "img/Remeraestampadani√±o.jpg", description: "Remera divertida con estampas coloridas.", category: "ni√±o" },
  { name: "Buzo con capucha ni√±o", image: "img/Buzoconcapuchani√±o.jpg", description: "Buzo abrigado con capucha y bolsillo frontal.", category: "ni√±o" },
  { name: "Campera de abrigo ni√±o", image: "img/Camperadeabrigoni√±o.jpg", description: "Campera gruesa para d√≠as fr√≠os.", category: "ni√±o" },
  { name: "Pantal√≥n cargo ni√±o", image: "img/Pantal√≥ncargoni√±o.jpg", description: "Pantal√≥n resistente con bolsillos laterales.", category: "ni√±o" },
  { name: "Zapatillas deportivas ni√±o", image: "img/Zapatillasdeportivasni√±o.jpg", description: "Zapatillas ideales para correr y jugar.", category: "ni√±o" },
  { name: "Short de ba√±o ni√±o", image: "img/Shortdeba√±oni√±o.jpg", description: "Short liviano para pileta o playa.", category: "ni√±o" },
  { name: "Camisa a cuadros ni√±o", image: "img/Camisaacuadrosni√±o.jpg", description: "Camisa con dise√±o a cuadros para ocasiones especiales.", category: "ni√±o" },
  { name: "Gorro de lana ni√±o", image: "img/Gorrodelanani√±o.jpg", description: "Gorro tejido para mantener el calor.", category: "ni√±o" }
];


const cart = JSON.parse(localStorage.getItem("cart")) || [];
const currentUser = localStorage.getItem("user");
let selectedProduct = null;

function renderProducts(filteredProducts = products) {
  const container = document.getElementById("product-list");
  container.innerHTML = "";
  filteredProducts.forEach(product => {
    const col = document.createElement("div");
    col.className = "col-md-4 mb-4";
    col.innerHTML = `
      <div class="card h-100">
        <img src="${product.image}" class="card-img-top" alt="${product.name}">
        <div class="card-body">
          <h5 class="card-title">${product.name}</h5>
          <button class="btn btn-info" style="background-color: #ffe066; color: black;" onclick="showProductModal('${product.name}')">M√°s detalles</button>
        </div>
      </div>`;
    container.appendChild(col);
  });
}

function filterProducts() {
  const searchText = document.getElementById("search-input").value.toLowerCase();
  const filteredProducts = products.filter(product =>
    product.name.toLowerCase().includes(searchText)
  );
  renderProducts(filteredProducts);
  filterByCategory();
}

function filterByCategory() {
  const selectedCategory = document.getElementById("category-filter").value;
  const searchText = document.getElementById("search-input").value.toLowerCase();
  const filtered = products.filter(p =>
    (!selectedCategory || p.category === selectedCategory) &&
    p.name.toLowerCase().includes(searchText)
  );
  renderProducts(filtered);
}


function updateCartView() {
  const list = document.getElementById("cart-items");
  list.innerHTML = "";
  if (cart.length === 0) {
    list.innerHTML = '<li class="list-group-item text-muted">Tu carrito est√° vac√≠o</li>';
  } else {
    cart.forEach(item => {
      const li = document.createElement("li");
      li.className = "list-group-item";
      li.textContent = item;
      list.appendChild(li);
    });
  }
  document.getElementById("cart-count").textContent = cart.length;
  localStorage.setItem("cart", JSON.stringify(cart));
}

function showProductModal(productName) {
  selectedProduct = products.find(p => p.name === productName);
  if (!selectedProduct) return;

  document.getElementById("productModalTitle").textContent = selectedProduct.name;
  document.getElementById("productModalImage").src = selectedProduct.image;
  document.getElementById("productModalImage").alt = selectedProduct.name;
  document.getElementById("productModalDescription").textContent = selectedProduct.description;
  document.getElementById("productSize").value = "";

  const modal = new bootstrap.Modal(document.getElementById('productModal'));
  modal.show();
}

function confirmAddToCart() {
  const size = document.getElementById("productSize").value;
  if (!size) {
    alert("Por favor, seleccion√° un talle.");
    return;
  }
  const item = `${selectedProduct.name} (Talle ${size})`;
  cart.push(item);
  updateCartView();

  const modal = bootstrap.Modal.getInstance(document.getElementById('productModal'));
  modal.hide();
}

// Funci√≥n de registro
function register(event) {
  event.preventDefault();

  const newUsername = document.getElementById("new-username").value;
  const newPassword = document.getElementById("new-password").value;

  const users = JSON.parse(localStorage.getItem("users")) || [];

  // Verificar si el usuario ya existe
  if (users.some(user => user.username === newUsername)) {
    alert("Este usuario ya est√° registrado.");
    return;
  }

  // Guardar el nuevo usuario
  users.push({ username: newUsername, password: newPassword });
  localStorage.setItem("users", JSON.stringify(users));

  // Cerrar el modal de registro y abrir el de login
  document.getElementById("registerModal").querySelector(".btn-close").click();
  alert("¬°Te has registrado exitosamente!");
}

// Funci√≥n de inicio de sesi√≥n
function login(event) {
  event.preventDefault();

  const username = document.getElementById("username").value;
  const password = document.getElementById("password").value;

  const users = JSON.parse(localStorage.getItem("users")) || [];

  // Verificar si el usuario existe y la contrase√±a es correcta
  const user = users.find(user => user.username === username && user.password === password);

  if (!user) {
    alert("Usuario o contrase√±a incorrectos.");
    return;
  }

  localStorage.setItem("user", username);
  document.getElementById("loginModal").querySelector(".btn-close").click();
  updateUserUI();
}

// Actualizar interfaz de usuario para mostrar el nombre del usuario
function updateUserUI() {
  const user = localStorage.getItem("user");
  const info = document.getElementById("user-info");
  const loginBtn = document.getElementById("loginBtn");
  const logoutBtn = document.getElementById("logoutBtn");

  if (user) {
    info.textContent = `Hola, ${user}`;
    loginBtn.classList.add("d-none");
    logoutBtn.classList.remove("d-none");
  } else {
    info.textContent = "";
    loginBtn.classList.remove("d-none");
    logoutBtn.classList.add("d-none");
  }
}

function logout() {
  localStorage.removeItem("user");
  updateUserUI();
}

function updateUserUI() {
  const user = localStorage.getItem("user");
  const info = document.getElementById("user-info");
  const loginBtn = document.getElementById("loginBtn");
  const logoutBtn = document.getElementById("logoutBtn");

  if (user) {
    info.textContent = `Hola, ${user}`;
    loginBtn.classList.add("d-none");
    logoutBtn.classList.remove("d-none");
  } else {
    info.textContent = "";
    loginBtn.classList.remove("d-none");
    logoutBtn.classList.add("d-none");
  }
}

function vaciarCarrito() {
  while (cart.length > 0) cart.pop();
  updateCartView();
  alert("El carrito ha sido vaciado.");
}

function finalizarCompra() {
  const usuarioLogueado = localStorage.getItem("user");

  if (!usuarioLogueado) {
    alert("Debes iniciar sesi√≥n para finalizar la compra.");
    return;
  }

  if (cart.length === 0) {
    alert("Tu carrito est√° vac√≠o.");
    return;
  }

  alert("¬°Gracias por tu compra!");
  vaciarCarrito();

  const cartModal = bootstrap.Modal.getInstance(document.getElementById('cartModal'));
  cartModal.hide();
}

// Funci√≥n para mostrar/ocultar el bot√≥n seg√∫n el desplazamiento de la p√°gina
window.onscroll = function() {
  const scrollToTopBtn = document.getElementById("scrollToTopBtn");
  if (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) {
    scrollToTopBtn.style.display = "block"; // Muestra el bot√≥n
  } else {
    scrollToTopBtn.style.display = "none"; // Oculta el bot√≥n
  }
};

// Funci√≥n para volver al principio de la p√°gina
function scrollToTop() {
  window.scrollTo({
    top: 0,
    behavior: "smooth"
  });
}



renderProducts();
updateCartView();
updateUserUI();
</script>
</body>
</html>

